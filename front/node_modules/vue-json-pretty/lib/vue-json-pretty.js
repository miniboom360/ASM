!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("vue")):"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VueJsonPretty=t(require("vue")):e.VueJsonPretty=t(e.Vue)}(this,(function(e){return function(){"use strict";var t={789:function(t){t.exports=e}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}function n(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{l||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,n)||t(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(n){return function(t){if(Array.isArray(t))return e(t)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||t(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r.r(o),r.d(o,{default:function(){return k}});var c=r(789),i=(0,c.defineComponent)({props:{data:{required:!0,type:String},onClick:Function},render:function(){var e=this.data,t=this.onClick;return(0,c.createVNode)("span",{class:"vjs-tree__brackets",onClick:t},[e])}}),u=(0,c.defineComponent)({emits:["change","update:modelValue"],props:{checked:{type:Boolean,default:!1},isMultiple:Boolean,onChange:Function},setup:function(e,t){var n=t.emit;return{uiType:(0,c.computed)((function(){return e.isMultiple?"checkbox":"radio"})),model:(0,c.computed)({get:function(){return e.checked},set:function(e){return n("update:modelValue",e)}})}},render:function(){var e=this.uiType,t=this.model,n=this.$emit;return(0,c.createVNode)("label",{class:["vjs-check-controller",t?"is-checked":""],onClick:function(e){return e.stopPropagation()}},[(0,c.createVNode)("span",{class:"vjs-check-controller__inner is-".concat(e)},null),(0,c.createVNode)("input",{checked:t,class:"vjs-check-controller__original is-".concat(e),type:e,onChange:function(){return n("change",t)}},null)])}});function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0,a=o||{},c=a.key,i=a.index,u=a.type,s=void 0===u?"content":u,f=a.showComma,y=void 0!==f&&f,v=a.length,m=void 0===v?1:v,b=p(e);if("array"===b){var g=e.map((function(e,n,o){return h(e,"".concat(t,"[").concat(n,"]"),r+1,{index:n,showComma:n!==o.length-1,length:m,type:s})})).reduce((function(e,t){return e.concat(t)}),[]);return[h("[",t,r,{showComma:!1,key:c,length:e.length,type:"arrayStart"})[0]].concat(g,h("]",t,r,{showComma:y,length:e.length,type:"arrayEnd"})[0])}if("object"===b){var k=Object.keys(e),O=k.map((function(n,o,a){return h(e[n],n.includes(".")?"".concat(t,'["').concat(n,'"]'):"".concat(t,".").concat(n),r+1,{key:n,showComma:o!==a.length-1,length:m,type:s})})).reduce((function(e,t){return e.concat(t)}),[]);return[h("{",t,r,{showComma:!1,key:c,index:i,length:k.length,type:"objectStart"})[0]].concat(O,h("}",t,r,{showComma:y,length:k.length,type:"objectEnd"})[0])}var j=Object.entries({content:e,level:r,key:c,index:i,path:t,showComma:y,length:m,type:s}).reduce((function(e,t){var r=n(t,2),o=r[0],a=r[1];return void 0!==a?d(d({},e),{},l({},o,a)):e}),{});return[j]}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},customValueFormatter:Function,selectableType:String,showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},selectOnClickNode:{type:Boolean,default:!0},collapsedOnClickBrackets:{type:Boolean,default:!0},pathSelectable:{type:Function,default:function(){return!0}},highlightSelectedNode:{type:Boolean,default:!0}},m=(0,c.defineComponent)({name:"TreeNode",props:y(y({},v),{},{node:{type:Object,required:!0},collapsed:Boolean,checked:Boolean,onTreeNodeClick:{type:Function},onBracketsClick:{type:Function},onSelectedChange:{type:Function}}),setup:function(e,t){var n=t.emit,r=(0,c.computed)((function(){return p(e.node.content)})),o=(0,c.computed)((function(){return"vjs-value vjs-value__".concat(r.value)})),a=(0,c.computed)((function(){return e.showDoubleQuotes?'"'.concat(e.node.key,'"'):e.node.key})),l=(0,c.computed)((function(){return"multiple"===e.selectableType})),i=(0,c.computed)((function(){return"single"===e.selectableType})),u=(0,c.computed)((function(){return e.pathSelectable(e.node.path,e.node.content)&&(l.value||i.value)})),s=function(e){var t=e+"";return"string"===r.value&&(t='"'.concat(t,'"')),t},d=e.customValueFormatter?function(t){var n;return null===(n=e.customValueFormatter)||void 0===n?void 0:n.call(e,t,e.node.key,e.node.path,s(t))}:null;return{state:(0,c.reactive)({valueClass:o,prettyKey:a,isMultiple:l,selectable:u}),defaultFormatter:s,customFormatter:d,onBracketsClickHandler:function(){e.collapsedOnClickBrackets&&n("brackets-click",!e.collapsed,e.node.path)},onCheckedChange:function(){n("selected-change",e.node)},onNodeClick:function(){n("tree-node-click",e.node),u.value&&e.selectOnClickNode&&n("selected-change",e.node)}}},render:function(){var e=this.state,t=this.node,n=this.showSelectController,r=this.highlightSelectedNode,o=this.checked,a=this.showLength,l=this.collapsed,s=this.showLine,d=this.defaultFormatter,p=this.customFormatter,h=this.onNodeClick,f=this.onCheckedChange,y=this.onBracketsClickHandler;return(0,c.createVNode)("div",{class:{"vjs-tree__node":!0,"has-selector":n,"is-highlight":r&&o},onClick:h},[n&&e.selectable&&"objectEnd"!==t.type&&"arrayEnd"!==t.type&&(0,c.createVNode)(u,{isMultiple:e.isMultiple,checked:o,onChange:f},null),Array.from(Array(t.level)).map((function(e,t){return(0,c.createVNode)("div",{key:t,class:{"vjs-tree__indent":!0,"has-line":s}},null)})),t.key&&(0,c.createVNode)("span",{class:"vjs-key"},["".concat(e.prettyKey,": ")]),(0,c.createVNode)("span",null,["content"!==t.type?(0,c.createVNode)(i,{data:t.content,onClick:y},null):p?(0,c.createVNode)("span",{class:e.valueClass,innerHTML:p(t.content)},null):(0,c.createVNode)("span",{class:e.valueClass},[d(t.content)]),t.showComma&&(0,c.createVNode)("span",null,[","]),a&&l&&(0,c.createVNode)("span",{class:"vjs-comment"},[(0,c.createTextVNode)(" // "),t.length,(0,c.createTextVNode)(" items ")])])])}});function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=(0,c.defineComponent)({name:"Tree",props:g(g({},v),{},{data:{type:Object,default:null},deep:{type:Number,default:1/0},deepCollapseChildren:{type:Boolean,default:!1},collapsePath:{type:RegExp,default:null},path:{type:String,default:"root"},virtual:{type:Boolean,default:!1},virtualLines:{type:Number,default:10},itemHeight:{type:Number,default:20},modelValue:{type:[String,Array],default:function(){return""}}}),emits:["click","change","update:modelValue"],setup:function(e,t){var r=t.emit,o=(0,c.ref)(),i=(0,c.reactive)({translateY:0,visibleData:null,hiddenPaths:h(e.data,e.path).reduce((function(t,n){var r=e.deepCollapseChildren?n.level>=e.deep:n.level===e.deep,o=r||e.collapsePath&&e.collapsePath.test(n.path);return"objectStart"!==n.type&&"arrayStart"!==n.type||!r&&!o?t:g(g({},t),{},l({},n.path,1))}),{})}),u=(0,c.computed)((function(){var t=null;return h(e.data,e.path).reduce((function(e,n,r){var o=g(g({},n),{},{id:r}),a=i.hiddenPaths[o.path];if(t&&t.path===o.path){var l="objectStart"===t.type,c=g(g(g({},t),o),{},{content:l?"{...}":"[...]",type:l?"objectCollapsed":"arrayCollapsed"});return t=null,e.concat(c)}return a&&!t?(t=o,e):t?e:e.concat(o)}),[])})),s=(0,c.computed)((function(){var t=e.modelValue;return t&&"multiple"===e.selectableType&&Array.isArray(t)?t:[t]})),d=(0,c.computed)((function(){return!e.selectableType||e.selectOnClickNode||e.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."})),p=function(t){if(e.virtual){var n=o.value,r=e.virtualLines,a=n&&n.scrollTop||0,l=Math.floor(a/e.itemHeight),c=l<0?0:l+r>t.length?t.length-r:l;c<0&&(c=0);var u=c+r;i.translateY=c*e.itemHeight,i.visibleData=t.filter((function(e,t){return t>=c&&t<u}))}else i.visibleData=t};return(0,c.watchEffect)((function(){d.value&&function(e){throw new Error("[VueJSONPretty] ".concat(e))}(d.value)})),(0,c.watchEffect)((function(){u.value&&p(u.value)})),{tree:o,state:i,flatData:u,selectedPaths:s,onTreeScroll:function(){p(u.value)},onSelectedChange:function(t){var o=t.path,l=e.selectableType;if("multiple"===l){var c=s.value.findIndex((function(e){return e===o})),i=a(s.value);-1!==c?i.splice(c,1):i.push(o),r("update:modelValue",i),r("change",i,a(s.value))}else if("single"===l&&s.value[0]!==o){var u=n(s.value,1)[0],d=o;r("update:modelValue",d),r("change",d,u)}},onTreeNodeClick:function(e){var t=e.content,n=e.path;r("click",n,t)},onBracketsClick:function(e,t){if(e)i.hiddenPaths=g(g({},i.hiddenPaths),{},l({},t,1));else{var n=g({},i.hiddenPaths);delete n[t],i.hiddenPaths=n}}}},render:function(){var e=this.virtual,t=this.itemHeight,n=this.customValueFormatter,r=this.showDoubleQuotes,o=this.showLength,a=this.showLine,l=this.showSelectController,i=this.selectOnClickNode,u=this.pathSelectable,s=this.highlightSelectedNode,d=this.collapsedOnClickBrackets,p=this.state,h=this.flatData,f=this.selectedPaths,y=this.selectableType,v=this.onTreeNodeClick,b=this.onBracketsClick,g=this.onSelectedChange,k=this.onTreeScroll,O=p.visibleData&&p.visibleData.map((function(e){return(0,c.createVNode)(m,{key:e.id,node:e,collapsed:!!p.hiddenPaths[e.path],"custom-value-formatter":n,"show-double-quotes":r,"show-length":o,"collapsed-on-click-brackets":d,checked:f.includes(e.path),"selectable-type":y,"show-line":a,"show-select-controller":l,"select-on-click-node":i,"path-selectable":u,"highlight-selected-node":s,onTreeNodeClick:v,onBracketsClick:b,onSelectedChange:g},null)}));return(0,c.createVNode)("div",{ref:"tree",class:{"vjs-tree":!0,"is-virtual":e},onScroll:k},[e?(0,c.createVNode)("div",{style:{height:"".concat(h.length*t,"px")}},[(0,c.createVNode)("div",{style:{transform:"translateY(".concat(p.translateY,"px)")}},[O])]):O])}})}(),o}()}));